<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DAS - Verificación de Trámite</title>
<style>
:root {
    --celeste: #37BBED;
    --verde: #8DC21F;
    --gris: #f5f5f5;
    --gris-oscuro: #e0e0e0;
    --texto: #333;
    --rojo: #e74c3c;
    --amarillo: #f1c40f;
}

body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: var(--gris);
    color: var(--texto);
}

header {
    background-color: var(--celeste);
    color: white;
    padding: 20px;
    text-align: center;
}

header img {
    height: 60px;
    margin-bottom: 10px;
}

h1 {
    margin: 10px 0;
}

.container {
    max-width: 700px;
    margin: 30px auto;
    padding: 20px;
    background-color: white;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    border-radius: 10px;
}

form {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

input {
    padding: 10px;
    font-size: 16px;
    border-radius: 5px;
    border: 1px solid var(--gris-oscuro);
}

button {
    padding: 10px;
    font-size: 16px;
    border: none;
    border-radius: 5px;
    background-color: var(--celeste);
    color: white;
    cursor: pointer;
}

button:hover {
    background-color: #2a9ad6;
}

.result {
    margin-top: 20px;
    padding: 15px;
    border-radius: 10px;
    background-color: var(--gris-oscuro);
    display: none;
}

.result p {
    margin: 8px 0;
}

.status {
    padding: 5px 10px;
    border-radius: 5px;
    color: white;
    font-weight: bold;
    display: inline-block;
}

.aprobado { background-color: var(--verde); }
.pendiente { background-color: var(--amarillo); color: #333; }
.rechazado { background-color: var(--rojo); }

a.link-doc {
    padding: 6px 10px;
    background-color: var(--celeste);
    color: white;
    text-decoration: none;
    border-radius: 5px;
}

a.link-doc:hover {
    background-color: #2a9ad6;
}

.result .links-container {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 5px;
}

footer {
    text-align: center;
    padding: 15px;
    background-color: var(--gris-oscuro);
    margin-top: 30px;
    border-top: 1px solid #ccc;
    font-size: 14px;
}
</style>
</head>
<body>

<header>
    <!-- Reemplazá el link con tu Google Drive -->
    <img src="https://drive.google.com/uc?export=view&id=1S5_Zwe6WF1d94ls0qunly81B7E2-YeqZ" alt="Logo DAS">
    <h1>DAS - Departamento de Auditoría y Servicios</h1>
    <p>Dirección: Av. Corrientes 2456, Piso 3, Oficina 12 – Tel: (011) 51461885 – Email: contacto@dasauditoria.com.ar</p>
</header>

<div class="container">
    <h2>Verificación de Trámite</h2>
    <p>Ingresá tu Número de Trámite y C.U. para ver el estado de tu documento.</p>

    <form id="searchForm">
        <input type="text" id="tramite" placeholder="Número de Trámite" required>
        <input type="text" id="cu" placeholder="C.U." required>
        <button type="submit">Buscar</button>
    </form>

    <div class="result" id="resultBox">
        <p><strong>Nombre y Apellido:</strong> <span id="resNombre"></span></p>
        <p><strong>C.U.:</strong> <span id="resCU"></span></p>
        <p><strong>Tipo de Documentación:</strong> <span id="resTipo"></span></p>
        <p><strong>Fecha de Emisión:</strong> <span id="resFecha"></span></p>
        <p><strong>Estado:</strong> <span id="resEstado" class="status"></span></p>
        <p><strong>Responsable Auditor/a:</strong> <span id="resResp"></span></p>
        <p><strong>Observaciones:</strong> <span id="resObs"></span></p>

        <p><strong>Documentación adjunta:</strong></p>
        <div id="resDocs" class="links-container"></div>

        <p><strong>Descargar certificado:</strong></p>
        <div class="links-container">
            <button id="downloadPDF">Descargar certificado en PDF</button>
        </div>
    </div>
</div>

<footer>
    &copy; 2026 DAS - Departamento de Auditoría y Servicios | Todos los derechos reservados
    <br>Todos los certificados emitidos por DAS tienen validez oficial y están registrados electrónicamente.
</footer>

<!-- jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
// Datos de ejemplo
const registros = [
    {
        tramite: "00123",
        cu: "12345678",
        nombre: "Juan Pérez",
        tipo: "Certificado Analítico",
        fecha: "13/02/2026",
        estado: "aprobado",
        responsable: "Carolina María Espindola",
        observaciones: "La documentación presentada ha sido evaluada y aprobada, cumpliendo con todos los requisitos pertinentes. El certificado ya se encuentra disponible para ser presentado junto con su documentación.",
        docs: [
            {nombre: "Documento 1", link: "https://drive.google.com/uc?export=view&id=ID_DOC1"},
            {nombre: "Documento 2", link: "https://drive.google.com/uc?export=view&id=ID_DOC2"}
        ],
        certificado: "Certificado oficial"
    },
    {
        tramite: "00124",
        cu: "87654321",
        nombre: "Lucía Gómez",
        tipo: "Título",
        fecha: "10/02/2026",
        estado: "pendiente",
        responsable: "Pedro Martínez",
        observaciones: "Falta firma digital",
        docs: [
            {nombre: "Documento 1", link: "https://drive.google.com/uc?export=view&id=ID_DOC3"}
        ],
        certificado: "Certificado oficial"
    }
];

let registroActual = null;

document.getElementById("searchForm").addEventListener("submit", function(e) {
    e.preventDefault();
    const tramite = document.getElementById("tramite").value.trim();
    const cu = document.getElementById("cu").value.trim();
    registroActual = registros.find(r => r.tramite === tramite && r.cu === cu);
    
    const box = document.getElementById("resultBox");
    if (registroActual) {
        document.getElementById("resNombre").textContent = registroActual.nombre;
        document.getElementById("resCU").textContent = registroActual.cu;
        document.getElementById("resTipo").textContent = registroActual.tipo;
        document.getElementById("resFecha").textContent = registroActual.fecha;
        const estadoEl = document.getElementById("resEstado");
        estadoEl.textContent = registroActual.estado.charAt(0).toUpperCase() + registroActual.estado.slice(1);
        estadoEl.className = "status " + registroActual.estado;
        document.getElementById("resResp").textContent = registroActual.responsable;
        document.getElementById("resObs").textContent = registroActual.observaciones;

        // Documentos
        const docsDiv = document.getElementById("resDocs");
        docsDiv.innerHTML = "";
        registroActual.docs.forEach(doc => {
            const a = document.createElement("a");
            a.href = doc.link;
            a.textContent = doc.nombre;
            a.className = "link-doc";
            a.target = "_blank";
            docsDiv.appendChild(a);
        });

        box.style.display = "block";
    } else {
        box.style.display = "block";
        box.innerHTML = "<p>No se encontró ningún registro con esos datos.</p>";
    }
});

// Descargar PDF
document.getElementById("downloadPDF").addEventListener("click", async function() {
    if (!registroActual) return;

    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    // Logo
    const logoUrl = "https://drive.google.com/uc?export=view&id=TU_ID_DEL_ARCHIVO";
    const img = new Image();
    img.src = logoUrl;
    img.crossOrigin = "anonymous";
    img.onload = function() {
        doc.addImage(img, 'PNG', 15, 10, 50, 20);

        doc.setFontSize(16);
        doc.text("Certificado de Documento", 70, 20);
        doc.setFontSize(12);
        doc.text(`Número de Trámite: ${registroActual.tramite}`, 15, 50);
        doc.text(`Nombre: ${registroActual.nombre}`, 15, 60);
        doc.text(`C.U.: ${registroActual.cu}`, 15, 70);
        doc.text(`Tipo de Documento: ${registroActual.tipo}`, 15, 80);
        doc.text(`Fecha de Emisión: ${registroActual.fecha}`, 15, 90);
        doc.text(`Estado: ${registroActual.estado.charAt(0).toUpperCase() + registroActual.estado.slice(1)}`, 15, 100);
        doc.text(`Responsable: ${registroActual.responsable}`, 15, 110);
        doc.text(`Observaciones: ${registroActual.observaciones}`, 15, 120);

        doc.save(`Certificado_${registroActual.tramite}.pdf`);
    };
});
</script>

</body>
</html>
